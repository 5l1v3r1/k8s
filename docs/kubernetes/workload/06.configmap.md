## 六、ConfigMap

### 6.1、概述

​		ConfigMap允许将配置文件与镜像文件分离，以使容器化的应用程序具有可移植性。

​		ConfigMap以一个或多个键值对的形式保存在kubernetes系统中以供应用使用，既可以用于表示一个变量的值，也可以用于表示一个完整配置文件的内容。

ConfigMap的典型用法：

- 生成为容器内的环境变量。
- 设置容器启动命令的启动参数（需设置为环境变量）。
- 以Volume的形式挂载为容器内部的文件或目录。

> 注意：
>
> 环境变量的名称受POSIX命名规范（[a-zA-Z\_]\[a-zA-Z0-9_]*）约束，不能以数字开头。如果包含非法字符，则系统将跳过该条环境变量的创建，并记录一个Event来提示环境变量无法生成，但并不阻止Pod的启动。



### 6.2、限制条件

使用ConfigMap有以下限制条件：

- ConfigMap必须在Pod之前创建。
- ConfigMap受Namespace限制，只有处于相同Namespace中的Pod才可以引用它。
- ConfigMap中的配额管理还未能实现。
- 在Pod对ConfigMap进行挂载（volumeMount）操作时，在容器内部只能挂载为“目录”，无法挂载为“文件”。在挂载到容器内部后，在目录下将包含ConfigMap定义的每个item，如果在该目录下原来还有其他文件，则容器内的该目录将被挂载的ConfigMap覆盖。如果应用程序需要保留原来的其他文件，则需要进行额外的处理。可以将ConfigMap挂载到容器内部的临时目录，再通过启动脚本将配置文件复制或链接到应用所用的实际配置目录下。